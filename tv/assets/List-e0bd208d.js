import{c as H,d as K,m as U,a as $,h as fe,r as p,o as Be,I as j,b as Me,e as ge,f as Re,g as Fe,i as me,j as be,k as je,u as _e,l as ye,n as Ee,p as he,q as ee,s as Te,t as z,v as F,w as Le,x as a,V as B,y as E,z as te,A as ae,B as ze,C as De,D as Oe,F as O,E as R,G as Ue,H as Ge,J as W,K as T,L as J,M as b,N as We,O as Je,P,Q as le,R as ne,S as ie,T as oe,U as se,W as M,X as He,Y as Ke,Z as Xe,_ as qe,$ as ue,a0 as D,a1 as Ye}from"./index-639cd4f7.js";import{V as Qe,a as re}from"./VTabs-7efcd422.js";const X=["sm","md","lg","xl","xxl"],Ve=(()=>X.reduce((e,d)=>(e[d]={type:[Boolean,String,Number],default:!1},e),{}))(),xe=(()=>X.reduce((e,d)=>(e["offset"+H(d)]={type:[String,Number],default:null},e),{}))(),Se=(()=>X.reduce((e,d)=>(e["order"+H(d)]={type:[String,Number],default:null},e),{}))(),ce={col:Object.keys(Ve),offset:Object.keys(xe),order:Object.keys(Se)};function Ze(e,d,n){let c=e;if(!(n==null||n===!1)){if(d){const i=d.replace(e,"");c+=`-${i}`}return e==="col"&&(c="v-"+c),e==="col"&&(n===""||n===!0)||(c+=`-${n}`),c.toLowerCase()}}const et=["auto","start","end","center","baseline","stretch"],tt=K({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...Ve,offset:{type:[String,Number],default:null},...xe,order:{type:[String,Number],default:null},...Se,alignSelf:{type:String,default:null,validator:e=>et.includes(e)},...U()},setup(e,d){let{slots:n}=d;const c=$(()=>{const i=[];let g;for(g in ce)ce[g].forEach(h=>{const S=e[h],x=Ze(g,h,S);x&&i.push(x)});const V=i.some(h=>h.startsWith("v-col-"));return i.push({"v-col":!V||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),i});return()=>{var i;return fe(e.tag,{class:c.value},(i=n.default)==null?void 0:i.call(n))}}}),at=["sm","md","lg","xl","xxl"],q=["start","end","center"],ke=["space-between","space-around","space-evenly"];function Y(e,d){return at.reduce((n,c)=>(n[e+H(c)]=d(),n),{})}const lt=[...q,"baseline","stretch"],Ce=e=>lt.includes(e),$e=Y("align",()=>({type:String,default:null,validator:Ce})),nt=[...q,...ke],Ie=e=>nt.includes(e),pe=Y("justify",()=>({type:String,default:null,validator:Ie})),it=[...q,...ke,"stretch"],Pe=e=>it.includes(e),Ne=Y("alignContent",()=>({type:String,default:null,validator:Pe})),de={align:Object.keys($e),justify:Object.keys(pe),alignContent:Object.keys(Ne)},ot={align:"align",justify:"justify",alignContent:"align-content"};function st(e,d,n){let c=ot[e];if(n!=null){if(d){const i=d.replace(e,"");c+=`-${i}`}return c+=`-${n}`,c.toLowerCase()}}const ve=K({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:Ce},...$e,justify:{type:String,default:null,validator:Ie},...pe,alignContent:{type:String,default:null,validator:Pe},...Ne,...U()},setup(e,d){let{slots:n}=d;const c=$(()=>{const i=[];let g;for(g in de)de[g].forEach(V=>{const h=e[V],S=st(g,V,h);S&&i.push(S)});return i.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),i});return()=>{var i;return fe(e.tag,{class:["v-row",c.value]},(i=n.default)==null?void 0:i.call(n))}}});function ut(){const e=p([]);Be(()=>e.value=[]);function d(n,c){e.value[c]=n}return{refs:e,updateRef:d}}const rt=K({name:"VPagination",props:{activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:j,default:"$first"},prevIcon:{type:j,default:"$prev"},nextIcon:{type:j,default:"$next"},lastIcon:{type:j,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Me(),...ge(),...Re(),...Fe(),...me(),...U({tag:"nav"}),...be(),...je({variant:"text"})},emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,d){let{slots:n,emit:c}=d;const i=_e(e,"modelValue"),{t:g,n:V}=ye(),{isRtl:h}=Ee(),{themeClasses:S}=he(e),x=p(-1);ee(void 0,{scoped:!0});const{resizeRef:N}=Te(t=>{if(!t.length)return;const{target:l,contentRect:s}=t[0],f=l.querySelector(".v-pagination__list > *");if(!f)return;const m=s.width,I=f.offsetWidth+parseFloat(getComputedStyle(f).marginRight)*2,G=e.showFirstLastPage?5:3;x.value=Math.max(0,Math.floor(+((m-I*G)/I).toFixed(2)))}),_=$(()=>parseInt(e.length,10)),y=$(()=>parseInt(e.start,10)),v=$(()=>e.totalVisible?parseInt(e.totalVisible,10):x.value>=0?x.value:_.value),u=$(()=>{if(_.value<=0||isNaN(_.value)||_.value>Number.MAX_SAFE_INTEGER)return[];if(v.value<=1)return[i.value];if(_.value<=v.value)return z(_.value,y.value);const t=v.value%2===0,l=t?v.value/2:Math.floor(v.value/2),s=t?l:l+1,f=_.value-l;if(s-i.value>=0)return[...z(Math.max(1,v.value-1),y.value),e.ellipsis,_.value];if(i.value-f>=(t?1:0)){const m=v.value-1,I=_.value-m+y.value;return[y.value,e.ellipsis,...z(m,I)]}else{const m=Math.max(1,v.value-3),I=m===1?i.value:i.value-Math.ceil(m/2)+y.value;return[y.value,e.ellipsis,...z(m,I),e.ellipsis,_.value]}});function o(t,l,s){t.preventDefault(),i.value=l,s&&c(s,l)}const{refs:w,updateRef:L}=ut();ee({VPaginationBtn:{color:F(e,"color"),border:F(e,"border"),density:F(e,"density"),size:F(e,"size"),variant:F(e,"variant"),rounded:F(e,"rounded"),elevation:F(e,"elevation")}});const A=$(()=>u.value.map((t,l)=>{const s=f=>L(f,l);if(typeof t=="string")return{isActive:!1,key:`ellipsis-${l}`,page:t,props:{ref:s,ellipsis:!0,icon:!0,disabled:!0}};{const f=t===i.value;return{isActive:f,key:t,page:V(t),props:{ref:s,ellipsis:!1,icon:!0,disabled:!!e.disabled||e.length<2,color:f?e.activeColor:e.color,ariaCurrent:f,ariaLabel:g(f?e.currentPageAriaLabel:e.pageAriaLabel,l+1),onClick:m=>o(m,t)}}}})),k=$(()=>{const t=!!e.disabled||i.value<=y.value,l=!!e.disabled||i.value>=y.value+_.value-1;return{first:e.showFirstLastPage?{icon:h.value?e.lastIcon:e.firstIcon,onClick:s=>o(s,y.value,"first"),disabled:t,ariaLabel:g(e.firstAriaLabel),ariaDisabled:t}:void 0,prev:{icon:h.value?e.nextIcon:e.prevIcon,onClick:s=>o(s,i.value-1,"prev"),disabled:t,ariaLabel:g(e.previousAriaLabel),ariaDisabled:t},next:{icon:h.value?e.prevIcon:e.nextIcon,onClick:s=>o(s,i.value+1,"next"),disabled:l,ariaLabel:g(e.nextAriaLabel),ariaDisabled:l},last:e.showFirstLastPage?{icon:h.value?e.firstIcon:e.lastIcon,onClick:s=>o(s,y.value+_.value-1,"last"),disabled:l,ariaLabel:g(e.lastAriaLabel),ariaDisabled:l}:void 0}});function r(){var t;const l=i.value-y.value;(t=w.value[l])==null||t.$el.focus()}function C(t){t.key===te.left&&!e.disabled&&i.value>e.start?(i.value=i.value-1,ae(r)):t.key===te.right&&!e.disabled&&i.value<y.value+_.value-1&&(i.value=i.value+1,ae(r))}return Le(()=>a(e.tag,{ref:N,class:["v-pagination",S.value],role:"navigation","aria-label":g(e.ariaLabel),onKeydown:C,"data-test":"v-pagination-root"},{default:()=>[a("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&a("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(k.value.first):a(B,E({_as:"VPaginationBtn"},k.value.first),null)]),a("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(k.value.prev):a(B,E({_as:"VPaginationBtn"},k.value.prev),null)]),A.value.map((t,l)=>a("li",{key:t.key,class:["v-pagination__item",{"v-pagination__item--is-active":t.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(t):a(B,E({_as:"VPaginationBtn"},t.props),{default:()=>[t.page]})])),a("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(k.value.next):a(B,E({_as:"VPaginationBtn"},k.value.next),null)]),e.showFirstLastPage&&a("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(k.value.last):a(B,E({_as:"VPaginationBtn"},k.value.last),null)])])]})),{}}});const ct=ze()({name:"VRating",props:{name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:j,default:"$ratingEmpty"},fullIcon:{type:j,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},ripple:Boolean,...ge(),...me(),...U(),...be()},emits:{"update:modelValue":e=>!0},setup(e,d){let{slots:n}=d;const{t:c}=ye(),{themeClasses:i}=he(e),g=_e(e,"modelValue"),V=$(()=>De(parseFloat(g.value),0,+e.length)),h=$(()=>z(Number(e.length),1)),S=$(()=>h.value.flatMap(r=>e.halfIncrements?[r-.5,r]:[r])),x=p(-1),N=p(-1),_=p();let y=!1;const v=$(()=>S.value.map(r=>{const C=e.hover&&x.value>-1,t=V.value>=r,l=x.value>=r,f=(C?l:t)?e.fullIcon:e.emptyIcon,m=e.activeColor??e.color,I=t||l?m:e.color;return{isFilled:t,isHovered:l,icon:f,color:I}})),u=$(()=>[0,...S.value].map(r=>{function C(){x.value=r}function t(){x.value=-1}function l(){if(r===0&&V.value===0){var m;(m=_.value)==null||m.focus()}else N.value=r}function s(){y||(N.value=-1)}function f(){e.disabled||e.readonly||(g.value=V.value===r&&e.clearable?0:r)}return{onMouseenter:e.hover?C:void 0,onMouseleave:e.hover?t:void 0,onFocus:l,onBlur:s,onClick:f}}));function o(){y=!0}function w(){y=!1}const L=$(()=>e.name??`v-rating-${Oe()}`);function A(r){var C,t;let{value:l,index:s,showStar:f=!0}=r;const{onMouseenter:m,onMouseleave:I,onFocus:G,onBlur:we,onClick:Ae}=u.value[s+1],Q=`${L.value}-${String(l).replace(".","-")}`,Z={color:(C=v.value[s])==null?void 0:C.color,density:e.density,disabled:e.disabled,icon:(t=v.value[s])==null?void 0:t.icon,ripple:e.ripple,size:e.size,tag:"span",variant:"plain"};return a(O,null,[a("label",{for:Q,class:{"v-rating__item--half":e.halfIncrements&&l%1>0,"v-rating__item--full":e.halfIncrements&&l%1===0},onMousedown:o,onMouseup:w,onMouseenter:m,onMouseleave:I},[a("span",{class:"v-rating__hidden"},[c(e.itemAriaLabel,l,e.length)]),f?n.item?n.item({...v.value[s],props:Z,value:l,index:s}):a(B,Z,null):void 0]),a("input",{class:"v-rating__hidden",name:L.value,id:Q,type:"radio",value:l,checked:V.value===l,onClick:Ae,onFocus:G,onBlur:we,ref:s===0?_:void 0,readonly:e.readonly,disabled:e.disabled},null)])}function k(r){return n["item-label"]?n["item-label"](r):r.label?a("span",null,[r.label]):a("span",null,[R(" ")])}return Le(()=>{var r;const C=!!((r=e.itemLabels)!=null&&r.length)||n["item-label"];return a(e.tag,{class:["v-rating",{"v-rating--hover":e.hover,"v-rating--readonly":e.readonly},i.value]},{default:()=>[a(A,{value:0,index:-1,showStar:!1},null),h.value.map((t,l)=>{var s,f;return a("div",{class:"v-rating__wrapper"},[C&&e.itemLabelPosition==="top"?k({value:t,index:l,label:(s=e.itemLabels)==null?void 0:s[l]}):void 0,a("div",{class:["v-rating__item",{"v-rating__item--focused":Math.ceil(N.value)===t}]},[e.halfIncrements?a(O,null,[a(A,{value:t-.5,index:l*2},null),a(A,{value:t,index:l*2+1},null)]):a(A,{value:t,index:l},null)]),C&&e.itemLabelPosition==="bottom"?k({value:t,index:l,label:(f=e.itemLabels)==null?void 0:f[l]}):void 0])})]})}),{}}}),dt={class:"mr-1"},vt={class:"text-grey ms-4"},ft=["title"],bt={__name:"List",setup(e){const d=Ue(),n=Ge(),c=p([]),i=p([]),g=p(""),V=p(!1),h=(v=n.channel.api)=>{switch(P.inc(),n.channel.type){case 0:ne(v).then(u=>{const o=u.class[0].ty;c.value=o.map(w=>({type_id:w.$.id,type_name:w._})),P.done()}).catch(u=>{console.log("err0 >>> ",u),P.done()});break;case 1:le(v).then(u=>{c.value=u.class??[],P.done()}).catch(u=>{throw V.value=!0,P.done(),u});break}},S=p(1),x=p(1),N=()=>{const v=n.channel.api+"?ac=detail&t="+g.value+"&pg="+S.value;switch(P.inc(),n.channel.type){case 0:ne(v).then(u=>{console.log("xml >>> ",u);const o=u.list[0].video??[];i.value=o.map(L=>{var A,k,r,C,t,l,s,f,m,I;return{vod_id:((A=L.id)==null?void 0:A[0])??"",vod_pic:((k=L.pic)==null?void 0:k[0])??"",vod_name:((r=L.name)==null?void 0:r[0])??"",vod_area:((C=L.area)==null?void 0:C[0])??"",vod_lang:((t=L.lang)==null?void 0:t[0])??"",vod_actor:((l=L.actor)==null?void 0:l[0])??"",vod_score:((s=L.score)==null?void 0:s[0])??"",vod_score_all:((f=L.score_all)==null?void 0:f[0])??"",vod_content:((m=L.des)==null?void 0:m[0])??"",vod_blurb:((I=L.blurb)==null?void 0:I[0])??"",vod_play_from:L.dl[0].dd[0].$.flag,vod_play_url:L.dl[0].dd[0]._}});const w=u.list[0].$;x.value=w.pagecount,P.done()}).catch(u=>{console.log("err0 >>> ",u),P.done()});break;case 1:le(v).then(u=>{console.log("json >>> ",u),i.value=u.list??[],x.value=u.pagecount,P.done()}).catch(u=>{throw P.done(),u});break}};W(S,()=>N()),W(()=>n.channel,v=>{v.api&&(g.value="",h())},{immediate:!0}),W(g,v=>N(),{immediate:!0});function _(v){n.playing=v,localStorage.setItem("play",JSON.stringify(v)),d.push("/video")}function y(){document.scrollingElement.scrollTo({top:0,behavior:"smooth"})}return(v,u)=>(T(),J("div",null,[a(Qe,{modelValue:g.value,"onUpdate:modelValue":u[0]||(u[0]=o=>g.value=o),"bg-color":"transparent",color:"basil",grow:""},{default:b(()=>[a(re,{value:""},{default:b(()=>[R(" 全部 ")]),_:1}),(T(!0),J(O,null,ie(c.value,o=>(T(),se(re,{key:o,value:o.type_id},{default:b(()=>[R(M(o.type_name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),a(We,{fluid:""},{default:b(()=>[a(ve,{dense:""},{default:b(()=>[(T(!0),J(O,null,ie(i.value,o=>(T(),se(tt,{key:o.vod_id,xl:"2",lg:"3",md:"4",sm:"6",xs:"12","align-self":"stretch"},{default:b(()=>[a(He,{"max-width":"300"},{default:b(()=>[a(Ke,{"lazy-src":o.vod_pic,src:o.vod_pic,class:"align-end hand",gradient:"to bottom, rgba(0,0,0,.1), rgba(0,0,0,.5)",height:"360px",cover:"",onClick:w=>_(o)},null,8,["lazy-src","src","onClick"]),a(Xe,null,{default:b(()=>[a(qe,{title:o.vod_name},{default:b(()=>[R(M(o.vod_name),1)]),_:2},1032,["title"]),a(ue,null,{default:b(()=>[D("span",dt,M(o.vod_area)+"·"+M(o.vod_lang),1)]),_:2},1024),a(ue,{class:"text-subtitle-1",title:o.vod_actor},{default:b(()=>[D("span",null,M(o.vod_actor),1)]),_:2},1032,["title"])]),_:2},1024),a(Ye,null,{default:b(()=>[a(ve,{align:"center",class:"mx-0"},{default:b(()=>[a(ct,{"model-value":o.vod_score/2,color:"amber",density:"compact","half-increments":"",readonly:"",size:"small"},null,8,["model-value"]),D("div",vt,M(o.vod_score)+" ("+M(o.vod_score_all)+") ",1)]),_:2},1024),D("div",{class:"my-4",title:o.vod_content},M(o.vod_blurb),9,ft)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(rt,{modelValue:S.value,"onUpdate:modelValue":u[1]||(u[1]=o=>S.value=o),length:x.value},null,8,["modelValue","length"])]),_:1}),a(B,{color:"#66cbfe",fab:"",size:"large",position:"fixed",location:"right bottom",icon:"",style:{bottom:"8px",right:"24px"},onClick:N},{default:b(()=>[a(oe,null,{default:b(()=>[R("mdi-reload")]),_:1})]),_:1}),a(B,{color:"#66cbfe",fab:"",size:"large",position:"fixed",location:"right bottom",icon:"",style:{bottom:"72px",right:"24px"},onClick:y},{default:b(()=>[a(oe,null,{default:b(()=>[R("mdi-chevron-up")]),_:1})]),_:1}),a(Je,{modelValue:V.value,"onUpdate:modelValue":u[2]||(u[2]=o=>V.value=o)},{actions:b(()=>[a(B,{color:"pink",variant:"text",onClick:h},{default:b(()=>[R(" 重试 ")]),_:1})]),default:b(()=>[R(" 请求失败 ")]),_:1},8,["modelValue"])]))}};export{bt as default};
